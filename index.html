<html>
    <head>
        <title>ECollision</title>
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
        
        <!-- Load Open Sans font -->
        <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

        <!-- Load jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

        <!-- Load jQuery UI library -->
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/themes/smoothness/jquery-ui.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>

        <!-- Load jQuery gridster plugin -->
        <link rel="stylesheet" type="text/css" href="lib/jquery.gridster.min.css">
        <script src="lib/jquery.gridster.min.js"></script>

        <!-- Load jQuery mousewheel plugin -->
        <script src="lib/jquery-mousewheel-3.1.12/jquery.mousewheel.js"></script>

        <!-- Load EaselJS graphics library -->
        <script src="lib/easeljs-0.7.1.min.js"></script>

        <!-- Load IcoMoon font stylesheet -->
        <link rel="stylesheet" type="text/css" href="fonts/icomoon/style.css">

        <!-- Load my stylesheet -->
        <link rel="stylesheet" type="text/css" href="style.css">
    </head> 
    
    <body>
        <div class="gridster">
            <ul></ul>
        </div>

        <script>
            var BUILD_SCRIPT = "bin/build.js"
            var gridster;

            $(function(){
                function resizeWidgets(e, ui, $widget) {
                
                }
                
                gridster = $(".gridster > ul").gridster({
                    widget_margins: [5, 5],
                    widget_base_dimensions: [100, 50],
                    max_cols: 6,
                    max_rows: 6,
                    resize: {
                        enabled:true,
                        resize: resizeWidgets,
                        stop: resizeWidgets
                    }
                }).data('gridster');

                var panels = [ ['simulation', 4, 10],
                                ['graph', 2, 4], 
                                ['sim-controls', 2, 3],
                                ['particle-info', 2, 3],
                                ['particle-controls', 4, 2]
                              ];

                var numLoadedPanels = 0;
            
                $.each(panels, function(i, panel){
                    var p = panel[0];
                    panel[0] = '<li id="'+p+'"></li>';
                    gridster.add_widget.apply(gridster, panel);
                    
                    console.log("Loading: "+p);
                    $("#"+p).load("panels/"+p+".html", function() {
                        console.log("Successfully loaded: "+p);
                        numLoadedPanels++;
                        if (numLoadedPanels == panels.length) {
                            var element = document.createElement("script");
                            
                            element.src = BUILD_SCRIPT;
                            
                            document.body.appendChild(element);
                        }
                    });
                });
            });
        </script>
    </body>
</html>