(function e$$0(m,n,f){function g(c,a){if(!n[c]){if(!m[c]){var b="function"==typeof require&&require;if(!a&&b)return b(c,!0);if(h)return h(c,!0);b=Error("Cannot find module '"+c+"'");throw b.code="MODULE_NOT_FOUND",b;}b=n[c]={exports:{}};m[c][0].call(b.exports,function(a){var b=m[c][1][a];return g(b?b:a)},b,b.exports,e$$0,m,n,f)}return n[c].exports}for(var h="function"==typeof require&&require,d=0;d<f.length;d++)g(f[d]);return g})({1:[function(k,m,n){(function(){var f,g,h,d,c,a,b=function(a,b){return function(){return a.apply(b,
arguments)}};a=k("./engine/simulation-engine");c=k("./ui/simulation");g=k("./ui/graph");d=k("./ui/overlay");k("./settings");f=k("./events/event-manager");h=k("./interpolator");m.exports=function(){function e(e){this.settings=e;this.tick=b(this.tick,this);this.engine=new a(this.settings.simulation.simulationWidth,this.settings.simulation.simulationHeight,this.settings);this.interpol=new h(this.settings.global.refreshRate,this.settings.global.updateRate,this.engine);this.interpol.lockFPS=!0;this.simulationUI=
new c(this.settings.simulation.simulationCanvas,this.engine,this.interpol,this.settings);this.graphUI=new g(this.settings.graph.graphCanvas,this.engine,0.02,5,this.settings);this.overlayUI=new d(this.settings.overlay.overlayCanvas,this.simulationUI,this.settings);this.paused=!1;this.fps=0;r=[this.simulationUI,this.graphUI,this.overlayUI];s=this.settings.global.updateRate;t=1E3/s;f.eventify(this)}var p,z,l,w,s,t,r;r=[];l=p=z=0;w=-1;s=t=0;e.prototype.start=function(){var a,b,e;a=0;for(b=r.length;a<
b;a++)e=r[a],e.init();return w=setInterval(this.tick,1E3/this.settings.global.refreshRate)};e.prototype.restart=function(){var a,b,e,p;e=[];a=0;for(b=r.length;a<b;a++)p=r[a],e.push(p.restart());return e};e.prototype.resume=function(){var a,b,e,p;this.paused=!1;e=[];a=0;for(b=r.length;a<b;a++)p=r[a],e.push(p.resume());return e};e.prototype.pause=function(){var a,b,e,p;this.paused=!0;e=[];a=0;for(b=r.length;a<b;a++)p=r[a],e.push(p.pause());return e};e.prototype.stop=function(){if(-1!==w)return clearInterval(w),
w=-1};e.prototype.getUpdateRate=function(){return s};e.prototype.getUpdateTime=function(){return t};e.prototype.update=function(){this.interpol.update();return l=this.interpol.interpolation};e.prototype.tick=function(){var a,b,e;this.paused||this.update();a=(new Date).getTime();p++;1E3<=a-z&&(this.fps=p,p=0,z=a);a=0;for(b=r.length;a<b;a++)e=r[a],e.draw(l);return this.fire("tick",[l])};return e}()}).call(this)},{"./engine/simulation-engine":2,"./events/event-manager":3,"./interpolator":4,"./settings":9,
"./ui/graph":10,"./ui/overlay":11,"./ui/simulation":16}],2:[function(k,m,n){(function(){var f,g;k("../objects/particle");g=k("../math/pvector");f=k("../events/event-manager");m.exports=function(){function h(a,b,e){this.width=a;this.height=b;this.settings=e;f.eventify(this)}var d,c;h.prototype.particles=[];h.prototype.setBounds=function(a,b){this.width=a;this.height=b};h.prototype.reset=function(){return this.particles=[]};d=function(){function a(){}a.prototype.time=0;a.prototype.particle=null;a.prototype.particle2=
null;return a}();h.prototype.edgeCollision=function(a,b){var e;e=a.cOR;a.x+a.radius>=this.width?b?(a.xVel*=-e,a.yVel*=e):a.x=this.width-a.radius:0>=a.x-a.radius&&(b?(a.xVel*=-e,a.yVel*=e):a.x=a.radius);if(a.y+a.radius>=this.height)return b?(a.xVel*=e,a.yVel*=-e):a.y=this.height-a.radius;if(0>=a.y-a.radius)return b?(a.xVel*=e,a.yVel*=-e):a.y=a.radius};h.prototype.collide=function(a,b,e){var p,c,l;c=b.x-a.x;l=b.y-a.y;p=b.radius+a.radius;return c*c+l*l<p*p?(c=new g(a.x-b.x,a.y-b.y),b=new g(a.xVel-b.xVel,
a.yVel-b.yVel),a=b.dotProduct(b),b=-2*b.dotProduct(c),p=c.dotProduct(c)-p*p,p=b*b-4*a*p,l=c=0,0<=p&&(c=(-b-Math.sqrt(p))/(2*a),l=(-b+Math.sqrt(p))/(2*a)),e.time=0<c&&1>=c?c:0<l&&1>=l?l:1,!0):!1};c=function(a,b){var e,p,c,l,d;d=new g(a.xVel,a.yVel);e=Math.PI/2;0!==a.xVel&&(e=Math.atan(a.yVel/a.xVel));l=(a.xVel*Math.cos(-e)-a.yVel*Math.sin(-e))*a.cOR;p=a.x-b.x;c=a.y-b.y;p=0!==p?Math.atan(c/p):Math.atan(c/(p-1E-5));d.x=l*Math.cos(p-e);d.y=l*Math.sin(p-e);return d};h.prototype.handleCollision=function(a){var b,
e,p,z,l,d,f,g,h;l=a.particle;d=a.particle2;h=c(l,d);f=c(d,l);p=(h.x*(l.mass-d.mass)+2*d.mass*f.x)/(l.mass+d.mass);z=(f.x*(d.mass-l.mass)+2*l.mass*h.x)/(l.mass+d.mass);b=Math.atan((l.y-d.y)/(l.x-d.x));e=Math.cos(b);g=Math.sin(b);b=p*e+h.y*g;h=p*g-h.y*e;p=z*e+f.y*g;e=z*g-f.y*e;this.seperateObjects(a,l,d);l.xVel=b;l.yVel=h;d.xVel=p;return d.yVel=e};h.prototype.seperateObjects=function(a,b,e){var c,d;a=a.time+0.001*a.time;if(1>a)return b.x-=b.xVel*this.settings.global.speedConst*a,b.y-=b.yVel*this.settings.global.speedConst*
a,e.x-=e.xVel*this.settings.global.speedConst*a,e.y-=e.yVel*this.settings.global.speedConst*a;a=e.x-b.x;c=e.y-b.y;a=e.radius-Math.abs(Math.sqrt(a*a+c*c)-b.radius)+0.1;c=(new g(b.xVel,b.yVel)).getMagnitudeNS()+1E-4;d=(new g(e.xVel,e.yVel)).getMagnitudeNS()+1E-4;d=c/(c+d);c=Math.atan2(b.y-e.y,b.x-e.x);b.x+=a*Math.cos(c)*d;b.y+=a*Math.sin(c)*d;d=1-d;e.x-=a*Math.cos(c)*d;return e.y-=a*Math.sin(c)*d};h.prototype.update=function(){var a,b,e,c,f,l,g,h,k;e=this.particles;a=0;for(b=e.length;a<b;a++)l=e[a],
this.edgeCollision(l,!0),l.update();a=[];h=this.particles;b=e=0;for(f=h.length;e<f;b=++e)for(l=h[b],b=c=b+1,k=this.particles.length-1;c<=k;b=c+=1)g=this.particles[b],b=new d,this.collide(l,g,b)&&(b.particle=l,b.particle2=g,a.push(b));a.sort(function(a,b){return a.time<b.time});e=0;for(l=a.length;e<l;e++)b=a[e],this.handleCollision(b);e=this.particles;b=0;for(a=e.length;b<a;b++)l=e[b],this.edgeCollision(l,!1);return this.fire("update")};return h}()}).call(this)},{"../events/event-manager":3,"../math/pvector":6,
"../objects/particle":7}],3:[function(k,m,n){(function(){m.exports=function(){function f(){}var g,h;g=function(){function d(c,a){this.name=c;this.data=a;this.removed=this.cancelled=!1}d.prototype.cancel=function(){return this.cancelled=!0};d.prototype.remove=function(){return this.removed=!0};return d}();h=[];f.prototype.addListener=function(d,c){(h[d]=h[d]||[]).push(c);return this};f.prototype.removeListener=function(d,c){var a,b,e,p,f,l;if(1===arguments.length)h[d]=[];else if("function"===typeof c&&
(l=h[d],void 0!==l)){a=-1;b=e=0;for(p=l.length;e<p;b=++e)if(f=l[b],f===c){a=b;break}0<=a&&l.splice(a,1)}return this};f.prototype.fire=function(d,c){var a,b,e,p,f,l,w;w=h[d];c=c||[];if(void 0!==w)for(a={},e=p=0,f=w.length;p<f&&(l=w[e],b=new g(d,a),l.apply(window,c.concat(b)),a=b.data,b.removed&&w.splice(e,1),!b.cancelled);e=++p);return this};f.prototype.hasListeners=function(d){var c;return 0<(null!=(c=void 0===h[d])?c:{0:h[d].length})};f.eventify=function(d,c){var a,b,e,p,g,l;g=["addListener","removeListener",
"fire"];c=c||new f;a=function(a){return d[a]=function(){return c[a].apply(c,arguments)}};l=[];b=0;for(e=g.length;b<e;b++)p=g[b],l.push(a(p));return l};return f}()}).call(this)},{}],4:[function(k,m,n){(function(){var f;f=k("./events/event-manager");m.exports=function(){function g(a,b,e){this.renderRate=a;this.updateRate=b;this.engine=e;this.start=(new Date).getTime();f.eventify(this)}var h,d,c;h=d=c=0;g.prototype.interpolation=0;g.prototype.lockFPS=!1;g.prototype.update=function(){var a,b;b=1E3/this.updateRate;
a=1E3/this.renderRate;h=this.lockFPS?(new Date).getTime()-this.start:h+a;if(h-d>=b){this.fire("before-update");for(c=h;h-d>=b;)this.engine.update(),this.fire("update"),d+=b;this.fire("after-update")}return this.interpolation=Math.min(1,(h-c)/b)};return g}()}).call(this)},{"./events/event-manager":3}],5:[function(k,m,n){(function(){m.exports=function(){return function(f,g){this.x=f;this.y=g}}()}).call(this)},{}],6:[function(k,m,n){(function(){m.exports=function(){function f(f,h){this.x=f;this.y=h}
f.prototype.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};f.prototype.getMagnitudeNS=function(){return this.x*this.x+this.y*this.y};f.prototype.dotProduct=function(f){return this.x*f.x+this.y*f.y};f.prototype.getNormal=function(){return new f(-this.y,this.x)};f.prototype.rotate=function(f){var h,d;h=this.x;d=this.y;this.x=h*Math.cos(f)-d*Math.sin(f);return this.y=h*Math.sin(f)+d*Math.cos(f)};return f}()}).call(this)},{}],7:[function(k,m,n){(function(){var f,g=function(d,c){function a(){this.constructor=
d}for(var b in c)h.call(c,b)&&(d[b]=c[b]);a.prototype=c.prototype;d.prototype=new a;d.__super__=c.prototype;return d},h={}.hasOwnProperty;f=k("./physics-object");k("../math/point-2d");m.exports=function(d){function c(a,b,e,p,d){this.radius=e;this.style=p;this.settings=d;c.__super__.constructor.call(this,a,b,0)}g(c,d);c.prototype.selected=!1;c.prototype.cOR=1;c.prototype.pastPositions=[];c.prototype.curPos=0;c.prototype.update=function(){this.x+=this.xVel*this.settings.global.speedConst;return this.y+=
this.yVel*this.settings.global.speedConst};c.prototype.copy=function(){var a;a=new c(this.x,this.y,this.radius,this.style,this.settings);a.index=this.index;a.cOR=this.cOR;a.mass=this.mass;a.xVel=this.xVel;a.yVel=this.yVel;return a};return c}(f)}).call(this)},{"../math/point-2d":5,"./physics-object":8}],8:[function(k,m,n){(function(){var f;f=k("../events/event-manager");m.exports=function(){function g(h,d,c){this.x=h;this.y=d;this.mass=c;this.lastX=this.x;this.lastY=this.y;f.eventify(this)}g.prototype.xVel=
0;g.prototype.yVel=0;g.prototype.capture=function(){this.lastX=this.x;return this.lastY=this.y};g.prototype.update=function(){this.x+=this.xVel;return this.y+=this.yVel};g.prototype.getEnergy=function(){return 0.5*this.mass*(this.xVel*this.xVel+this.yVel*this.yVel)};return g}()}).call(this)},{"../events/event-manager":3}],9:[function(k,m,n){(function(){m.exports=function(){function f(){}f.prototype.global={refreshRate:24,updateRate:60,showVelocities:!1,enableInterpolation:!0,maxTraceLength:30,speedConst:1,
maxParticles:1E4,minRadius:5,maxRadius:30,errorTime:5E3};f.prototype.simulation={simulationWidth:1E3,simulationHeight:1E3,simulationCanvas:"simulation-canvas",enableSelection:!1};f.prototype.graph={graphCanvas:"graph-canvas",graphScaleX:0.02,graphScaleY:5,graphZoomFactor:1.25,graphMinZoomIndex:5,graphMaxZoomIndex:5};f.prototype.overlay={overlayCanvas:"overlay-canvas"};return f}()}).call(this)},{}],10:[function(k,m,n){(function(){var f,g,h=function(c,a){function b(){this.constructor=c}for(var e in a)d.call(a,
e)&&(c[e]=a[e]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c},d={}.hasOwnProperty;g=k("./widget");k("../objects/particle");f=k("../math/point-2d");m.exports=function(c){function a(b,e,c,d,f){this.engine=e;this.scaleX=c;this.scaleY=d;this.settings=f;a.__super__.constructor.call(this,b)}var b,e,d,g,l,k,s,t,r,m,n;h(a,c);a.prototype.x=0;a.prototype.y=0;a.prototype.scaleX=0;a.prototype.scaleY=0;g=new createjs.Shape;m=s=k=0;d=[];t=0;l=150;r=!1;n=e=b=0;a.prototype.init=function(){var a,
b;a=new createjs.Shape;b=new createjs.Shape;a.graphics.beginStroke("red").moveTo(this.x,this.height).lineTo(this.width,this.height);b.graphics.beginStroke("red").moveTo(this.x,this.y).lineTo(this.x,this.height);this.stage.addChild(a);this.stage.addChild(b);this.stage.addChild(g);this.stage.update();return this.updateData()};a.prototype.draw=function(a){var c,f,l,h,n,u,q;if(null!==this.engine){a=g.graphics;a.clear();h=d.length-1;for(l=n=0;l<h-1;){if(r){r=!1;return}n+=d[l].y;c=(t+l)%h;f=(t+l+1)%h;u=
d[c].x*this.scaleX-k;u>this.width&&(k+=u-this.width);u=d[c].x*this.scaleX-k;q=d[c].y*this.scaleY+s+m;c=d[f].x*this.scaleX-k;f=d[f].y*this.scaleY+s+m;a.beginStroke("red").moveTo(this.x+u,this.y+this.height-q).lineTo(this.x+c,this.y+this.height-f);l++}this.paused||(b+=1E3/this.settings.global.updateRate,e=this.getEnergy(),this.addData(b,e));a=n/d.length;l=this.height/2;s=l-a*this.scaleY;return this.stage.update()}};a.prototype.restart=function(){d=[];k=s=b=e=t=0;return r=!0};a.prototype.calibrate=function(){return m=
0};a.prototype.zoomIn=function(){if(n<this.settings.graph.graphMaxZoomIndex)return this.scaleX*=this.settings.graph.graphZoomFactor,this.scaleY*=this.settings.graph.graphZoomFactor,k*=this.scaleX,s*=this.scaleY,this.updateData(),n++;throw"ERROR: Maximum zoom reached";};a.prototype.zoomOut=function(){if(n>-this.settings.graph.graphMinZoomIndex)return this.scaleX/=this.settings.graph.graphZoomFactor,this.scaleY/=this.settings.graph.graphZoomFactor,k*=this.scaleX,s*=this.scaleY,this.updateData(),n--;
throw"ERROR: Minimum zoom reached";};a.prototype.moveUp=function(){return m-=5};a.prototype.moveDown=function(){return m+=5};a.prototype.getZoomIndex=function(){return n};a.prototype.addData=function(a,b){var e;return d.length>l?(e=t,t=(t+1)%l,d[e]=new f(a,b)):d.push(new f(a,b))};a.prototype.updateData=function(){var a,b,e,c,f;b=[];l=Math.round(this.width/(1E3/this.settings.global.updateRate*this.scaleX))+5;a=d.length-1;e=0;a>l&&(e=a-l);c=e;for(f=a-1;e<=f;c=e+=1)c=(t+c)%a,b.push(d[c]);r=!0;t=0;return d=
b};a.prototype.getEnergy=function(){var a,b,e,c,d;a=0;d=this.engine.particles;b=0;for(e=d.length;b<e;b++)c=d[b],a+=c.getEnergy();return Math.round(a/1E3)};return a}(g)}).call(this)},{"../math/point-2d":5,"../objects/particle":7,"./widget":17}],11:[function(k,m,n){(function(){var f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);e.prototype=b.prototype;a.prototype=new e;a.__super__=b.prototype;
return a},c={}.hasOwnProperty;g=k("./widget");f=k("../objects/particle");m.exports=function(a){function b(a,d,f){this.simulation=d;this.settings=f;this.handleClick=h(this.handleClick,this);this.handleMouseMove=h(this.handleMouseMove,this);this.handleMouseWheel=h(this.handleMouseWheel,this);b.__super__.constructor.call(this,a);x=c=this.width/2;y=g=this.height/2;B.x=this.width/2-40;u=m(this.width,this.height);this.hide();$(document).keydown(function(a){s=a.ctrlKey;return e=a.shiftKey});$(document).keyup(function(a){return e=
s=!1});this.canvas.bind("contextmenu",function(a){return!1});x=c=this.width/2;y=g=this.height/2;this.stage.addEventListener("stagemousemove",this.handleMouseMove);this.canvas.mousedown(this.handleClick);this.canvas.mousewheel(this.handleMouseWheel)}var e,c,g,l,k,s,m,r,n,u,C,D,A,B,x,y,E,q,v;d(b,a);r=0;A=-1;y=g=x=c=0;v=new createjs.Shape;n=new createjs.Text("","bold 15px Arial");l=new createjs.Text("","bold 15px Arial","red");k=0;E=!1;B=new createjs.Text("","bold 15px Arial");B.x=0;B.y=10;e=s=!1;D=
C=0;q=null;u=0;m=function(a,b){return b?m(b,a%b):a};b.prototype.resize=function(a,b){return u=m(this.width,this.height)};b.prototype.init=function(){this.stage.removeAllChildren();x=c=this.width/2;y=g=this.height/2;return this.stage.addChild(B)};b.prototype.handleMouseWheel=function(a){if(0>a.deltaY){if(q.radius>this.settings.global.minRadius)return q.radius-=1}else if(q.radius<this.settings.global.maxRadius)return q.radius+=1};b.prototype.handleMouseMove=function(a){var b,e,d,f,l;x=c=a.stageX;y=
g=a.stageY;s||(a=Math.round(x/u),b=Math.round(y/u),c=a*u,g=b*u);switch(r){case 0:v.x=c;v.y=g;null!==q&&(q.x=c,q.y=g);n.x=c;n.y=g;break;case 1:e=v.graphics;a=c-v.x;b=g-v.y;n.x=v.x+a/2;n.y=v.y+b/2;n.text=Math.round(Math.sqrt(a*a+b*b))+" px/s";q.xVel=a/this.settings.global.updateRate;q.yVel=b/this.settings.global.updateRate;e.clear().beginStroke("red").setStrokeStyle(3).moveTo(0,0).lineTo(a,b);break;case 2:for(l=this.simulation.engine.particles,e=0,d=l.length;e<d;e++)f=l[e],a=f.x-x,b=f.y-y,a*a+b*b<=
f.radius*f.radius?(f.select(),q=f):f.deselect()}};b.prototype.handleClick=function(a){var b;if(2===a.button&&2!==r){switch(r){case 0:this.end()}this.reset()}else switch(r){case 0:v.graphics.clear();this.stage.addChild(v);this.stage.addChild(n);r=1;break;case 1:b=this.simulation.addParticle(q.x,q.y,q.mass,q.radius,q.style);b.xVel=q.xVel;b.yVel=q.yVel;b.cOR=q.cOR;this.stage.removeChild(v);this.stage.removeChild(n);q.xVel=q.yVel=0;1!==A||e?r=0:(r=2,this.stage.removeChild(q.displayObj));break;case 2:q.displayObj.dispatchEvent("click"),
2===a.button?this.simulation.removeSelected():(b=q,q=b.copy(),C=b.x,D=b.y,this.stage.addChild(q.displayObj),e||this.simulation.removeSelected(),r=0)}return a.stopPropagation()};b.prototype.draw=function(a){if(!this.hidden)return null!==q&&q.draw(q.x,q.y),E&&(k-=1E3/this.settings.global.updateRate,0>=k&&(E=!1,this.stage.removeChild(l))),this.stage.update()};b.prototype.reset=function(){var a;if(1===A)return a=simulation.addParticle(C,D,q.mass,q.radius,q.style),a.xVel=q.xVel,a.yVel=q.yVel,this.removeChild(q.displayObj),
q=null,r=2;this.stage.removeChild(v);this.stage.removeChild(n);return r=0};b.prototype.beginAdd=function(a,b,e){this.show();this.init();q=new f(c,g,25,e,this.settings);q.mass=a;q.cOR=b;n.x=x;n.y=y;this.stage.addChild(q.displayObj);B.text="Mode: Add";return A=r=0};b.prototype.beginEdit=function(){this.show();this.init();B.text="Mode: Edit";r=2;return A=1};b.prototype.end=function(){this.hide();this.stage.removeAllChildren();null!==q&&(q=null);A=-1;return e=s=!1};b.prototype.getCurrentParticle=function(){return q};
b.prototype.getMode=function(){return A};return b}(g)}).call(this)},{"../objects/particle":7,"./widget":17}],12:[function(k,m,n){(function(){var f,g,h=function(c,a){function b(){this.constructor=c}for(var e in a)d.call(a,e)&&(c[e]=a[e]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c},d={}.hasOwnProperty;f=k("./particle-renderer");g=k("../simulation-renderer");m.exports=function(c){function a(e,c,d){this.canvasName=e;this.interpolator=c;this.settings=d;a.__super__.constructor.call(this,
this.canvasName,this.interpolator);this.stage=new createjs.Stage(this.canvasName);console.log(this.interpolator);this.interpolator.addListener("before-update",function(){var a,e,c,d;d=[];a=0;for(e=b.length;a<e;a++)c=b[a],d.push(c.capture());return d})}var b;h(a,c);b=[];a.prototype.addParticle=function(a){a=new f(a,this.settings.simulation.enableSelection);this.stage.addChild(a.displayObj);return b.push(a)};a.prototype.removeParticle=function(a){};a.prototype.draw=function(a){var c,d,f;c=0;for(d=b.length;c<
d;c++)f=b[c],f.draw(a);return this.stage.update()};return a}(g)}).call(this)},{"../simulation-renderer":15,"./particle-renderer":13}],13:[function(k,m,n){(function(){var f,g,h,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);e.prototype=b.prototype;a.prototype=new e;a.__super__=b.prototype;return a},c={}.hasOwnProperty;h=k("../renderer");g=k("../../../math/point-2d");f=k("../../../events/event-manager");m.exports=function(a){function b(a,b){this.particle=a;this.displayObj=
new createjs.Shape;c=b;this.lastX=this.particle.x;this.lastY=this.particle.y;this.selected=!1;this.displayObj.x=this.particle.x;this.displayObj.y=this.particle.y;this.displayObj.addEventListener("click",function(a){return function(b){if(a.selected)return a.fire("deselect",[b,a]),a.deselect();a.fire("select",[b,a]);return a.select()}}(this));this.displayObj.graphics.clear().beginFill(this.particle.style).drawCircle(0,0,this.particle.radius).endFill();f.eventify(this)}var c,h,k;d(b,a);k=[];a=0;c=!1;
b.prototype.capture=function(){this.lastX=this.particle.x;return this.lastY=this.particle.y};c&&b.selected&&(a++,a%=20,h=k.length,20>h?k.push(new g(b.x,b.y)):k[a]=new g(b.x,b.y));b.prototype.select=function(){return this.selected=!0};b.prototype.deselect=function(){this.selected=!1;return k=[]};b.prototype.draw=function(a){var b,d,f,g;d=this.particle.x;f=this.particle.y;d=this.lastX+a*(d-this.lastX);f=this.lastY+a*(f-this.lastY);this.displayObj.x=d;this.displayObj.y=f;if(c&&this.selected){h=k.length;
b=a=0;for(f=h-1;a<=f;b=a+=1)g=k[(b+this.particle.curPos)%h],d=g.x-this.particle.x,g=g.y-this.particle.y,b/=h,b="rgba(100, 100, 100, "+b+")",graphics.beginStroke(b).drawCircle(d,g,this.particle.radius).endStroke();return graphics.beginStroke("blue").setStrokeStyle(3).drawCircle(0,0,this.particle.radius).endStroke()}};return b}(h)}).call(this)},{"../../../events/event-manager":3,"../../../math/point-2d":5,"../renderer":14}],14:[function(k,m,n){(function(){m.exports=function(){function f(){}f.prototype.draw=
function(f){};return f}()}).call(this)},{}],15:[function(k,m,n){(function(){var f,g=function(d,c){function a(){this.constructor=d}for(var b in c)h.call(c,b)&&(d[b]=c[b]);a.prototype=c.prototype;d.prototype=new a;d.__super__=c.prototype;return d},h={}.hasOwnProperty;f=k("./renderer");m.exports=function(d){function c(a,b){this.canvas=a;this.interpolator=b}g(c,d);c.prototype.addParticle=function(a){};c.prototype.removeParticle=function(a){};return c}(f)}).call(this)},{"./renderer":14}],16:[function(k,
m,n){(function(){var f,g,h,d,c=function(b,c){function d(){this.constructor=b}for(var f in c)a.call(c,f)&&(b[f]=c[f]);d.prototype=c.prototype;b.prototype=new d;b.__super__=c.prototype;return b},a={}.hasOwnProperty;d=k("./widget");h=k("../objects/particle");g=k("../events/event-manager");f=k("./renderer/easeljs/easeljs-renderer");m.exports=function(a){function e(a,b,c,d){this.engine=b;this.interpolator=c;this.settings=d;e.__super__.constructor.call(this,a);this.engine.width=this.width;this.engine.height=
this.height;this.renderer=new f(this.canvasName,this.interpolator,this.settings);g.eventify(this)}var d;c(e,a);d=null;e.prototype.resize=function(a,b){return this.engine.setBounds(a,b)};e.prototype.addParticle=function(a,b,c,d,e){a=new h(a,b,d,e,this.settings);a.mass=c;this.renderer.addParticle(a);a.addListener("select",function(a){return function(b,c){return a.selected=c}}(this)).addListener("deselect",function(a){return function(b,c){return a.selected=null}}(this));this.engine.particles.push(a);
return a};e.prototype.removeParticle=function(a){this.stage.removeChild(this.engine.particles[a].displayObj);return this.engine.particles.splice(a,1)};e.prototype.loadParticles=function(a){var b,c,d,e,f;this.restart();f=[];b=0;for(c=a.length;b<c;b++)d=a[b],e=this.addParticle(d.x,d.y,d.mass,d.radius,d.style),e.xVel=d.xVel,e.yVel=d.yVel,f.push(e.cOR=d.cOR);return f};e.prototype.saveParticles=function(a){var b,c,d,e,f;e=this.engine.particles;f=[];b=0;for(c=e.length;b<c;b++)d=e[b],f.push(a.push(d.copy()));
return f};e.prototype.removeSelected=function(){var a,b,c,e,f;if(null!==d){f=this.particles;a=b=0;for(c=f.length;b<c;a=++b)e=f[a],e===d&&this.removeParticle(a);return d=null}};e.prototype.getSelected=function(){return d};e.prototype.restart=function(){this.stage.removeAllChildren();d=null;this.engine.reset();return this.fire("restart")};e.prototype.draw=function(a){this.renderer.draw(a);return this.fire("draw")};return e}(d)}).call(this)},{"../events/event-manager":3,"../objects/particle":7,"./renderer/easeljs/easeljs-renderer":12,
"./widget":17}],17:[function(k,m,n){(function(){m.exports=function(){function f(f){this.canvasName=f;this.canvas=$("#"+this.canvasName);this.width=this.canvas.width();this.height=this.canvas.height();this.hidden=!1;this.stage=new createjs.Stage(this.canvasName);this.canvas.attr("width",this.width);this.canvas.attr("height",this.height)}f.prototype.init=function(){};f.prototype.addEventListener=function(f,h){return this.stage.addEventListener(f,h)};f.prototype.draw=function(f){};f.prototype.restart=
function(){};f.prototype.stop=function(){};f.prototype.resume=function(){return this.paused=!1};f.prototype.pause=function(){return this.paused=!0};f.prototype.resize=function(f,h){this.width=f;return this.height=h};f.prototype.show=function(){this.hidden=!1;return this.canvas.fadeIn(200)};f.prototype.hide=function(){this.hidden=!0;return this.canvas.fadeOut(200)};return f}()}).call(this)},{}],18:[function(k,m,n){function f(){for(var c="0123456789ABCDEF".split(""),a="#",b=0;6>b;b++)a+=c[Math.floor(16*
Math.random())];return a}m=k("../../../bin/out/settings");var g=k("../../../bin/out/ecollision");$.widget("custom.sliderEx",$.ui.slider,{_create:function(){this.options.title=this.options.title||this.element.attr("title");this.options._valueDiv=$("<div class='slider-val'></div>");var c=this.options.title,a=$("<div class='slider-comp'></div>");a.insertBefore(this.element);a.append("<div class='slider-title'>"+c+"</div>");this.element.addClass("slider");a.append(this.element.detach());a.append(this.options._valueDiv);
this.options._valueDiv.text(this.options.value);return this._super()},_slide:function(){this._superApply(arguments);this.options._valueDiv.text(this.options.value)}});n=$("#ecol-canvas");k=n.width();n=n.height();var h=new m;h.simulation.simulationCanvas="ecol-canvas";h.global.maxParticles=1E3;var d=new g(h);for(m=0;0>m;m++)g=d.simulationUI.addParticle(Math.random()*k,Math.random()*n,50,10,f()),g.xVel=3,g.yVel=3;d.addListener("tick",function(c){c="";c=24>d.fps?(""+d.fps).fontcolor("red"):(""+d.fps).fontcolor("green");
$("#fps-counter").html("FPS: "+c+" Hz");$("#num-particles").html("Number of particles: "+(""+d.engine.particles.length).fontcolor("green"))});d.simulationUI.onSelect=function(c){$("#x-slider").sliderEx("value",c.x);$("#y-slider").sliderEx("value",c.y);$("#x-vel-slider").sliderEx("value",c.xVel);$("#y-vel-slider").sliderEx("value",c.yVel);$("#radius-slider").sliderEx("value",c.radius);$("#mass-slider").sliderEx("value",c.mass);$("#cor-slider").sliderEx("value",c.cOR)};d.start();$("#run-pause").click(function(){d.paused?
d.resume():d.pause();d.paused?$("#run-pause").find(".ui-button-text").text("Run"):$("#run-pause").find(".ui-button-text").text("Pause")});$("#step").click(function(){d.paused&&d.update()});$("#add").click(function(){var c=$("#x-slider").sliderEx("value"),a=$("#y-slider").sliderEx("value"),b=$("#x-vel-slider").sliderEx("value"),e=$("#y-vel-slider").sliderEx("value"),g=$("#radius-slider").sliderEx("value"),h=$("#mass-slider").sliderEx("value"),k=$("#cor-slider").sliderEx("value"),c=d.simulationUI.addParticle(c,
a,h,g,f());c.cOR=k;c.xVel=b;c.yVel=e});$("#remove").click(function(){d.simulationUI.removeSelected()});$("#clear").click(function(){d.restart()});$(".button").button();$("#sim-speed-slider").sliderEx({step:0.01,value:1,min:0,max:2,slide:function(c,a){h.global.speedConst=a.value}});$("#x-slider").sliderEx({value:k/2,min:0,max:k});$("#y-slider").sliderEx({value:n/2,min:0,max:n});$("#x-vel-slider").sliderEx({value:0,min:-30,max:30});$("#y-vel-slider").sliderEx({value:0,min:-30,max:30});$("#radius-slider").sliderEx({value:30,
min:0,max:60});$("#mass-slider").sliderEx({value:500,min:0,max:1E3});$("#cor-slider").sliderEx({value:1,step:0.01,min:0,max:1})},{"../../../bin/out/ecollision":1,"../../../bin/out/settings":9}]},{},[18]);
