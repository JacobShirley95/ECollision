(function(D){"object"===typeof exports&&"undefined"!==typeof module?module.exports=D():"function"===typeof define&&define.amd?define([],D):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).ecollision=D()})(function(){return function e(k,p,c){function m(g,a){if(!p[g]){if(!k[g]){var b="function"==typeof require&&require;if(!a&&b)return b(g,!0);if(s)return s(g,!0);b=Error("Cannot find module '"+g+"'");throw b.code="MODULE_NOT_FOUND",b;}b=p[g]=
{exports:{}};k[g][0].call(b.exports,function(a){var b=k[g][1][a];return m(b?b:a)},b,b.exports,e,k,p,c)}return p[g].exports}for(var s="function"==typeof require&&require,r=0;r<c.length;r++)m(c[r]);return m}({1:[function(e,k,p){(function(){var c,m,s,r,g,a=function(a,d){return function(){return a.apply(d,arguments)}};g=e("./engine/simulation-engine");r=e("./ui/simulation");m=e("./ui/graph");s=e("./ui/overlay");e("./settings");c=e("./events/event-manager");k.exports=function(){function b(b){this.settings=
b;this.tick=a(this.tick,this);this.engine=new g(this.settings.simulation.simulationWidth,this.settings.simulation.simulationHeight,this.settings);this.simulationUI=new r(this.settings.simulation.simulationCanvas,this.engine,this.settings);this.graphUI=new m(this.settings.graph.graphCanvas,this.engine,0.02,5,this.settings);this.overlayUI=new s(this.settings.overlay.overlayCanvas,this.simulationUI,this.settings);this.paused=!1;this.fps=0;u=[this.simulationUI,this.graphUI,this.overlayUI];e=this.settings.global.updateRate;
k=1E3/e;t=1E3/this.settings.global.refreshRate;c.eventify(this)}var d,f,l,h,q,t,C,w,e,k,u;u=[];h=f=l=q=w=d=0;C=-1;e=k=t=0;b.prototype.start=function(){var a,b,d;a=0;for(b=u.length;a<b;a++)d=u[a],d.init();return C=setInterval(this.tick,1E3/this.settings.global.refreshRate)};b.prototype.restart=function(){var a,b,d,f;d=[];a=0;for(b=u.length;a<b;a++)f=u[a],d.push(f.restart());return d};b.prototype.resume=function(){var a,b,d,f;this.paused=!1;d=[];a=0;for(b=u.length;a<b;a++)f=u[a],d.push(f.resume());
return d};b.prototype.pause=function(){var a,b,d,f;this.paused=!0;d=[];a=0;for(b=u.length;a<b;a++)f=u[a],d.push(f.pause());return d};b.prototype.stop=function(){if(-1!==C)return clearInterval(C),C=-1};b.prototype.getUpdateRate=function(){return e};b.prototype.getUpdateTime=function(){return k};b.prototype.update=function(){d+=t;if(q+k<d)for(w=d;q+k<d;)this.engine.update(),q+=k;return h=Math.min(1,(d-w)/k)};b.prototype.tick=function(){var a,b,d;this.paused||this.update();a=(new Date).getTime();f++;
1E3<=a-l&&(this.fps=f,f=0,l=a);a=0;for(b=u.length;a<b;a++)d=u[a],d.draw(h);return this.fire("tick",[h])};return b}()}).call(this)},{"./engine/simulation-engine":2,"./events/event-manager":3,"./settings":8,"./ui/graph":10,"./ui/overlay":11,"./ui/simulation":16}],2:[function(e,k,p){(function(){var c,m;e("../objects/particle");m=e("../math/pvector");c=e("../events/event-manager");k.exports=function(){function e(a,b,d){this.width=a;this.height=b;this.settings=d;c.eventify(this)}var r,g;e.prototype.particles=
[];e.prototype.setBounds=function(a,b){this.width=a;this.height=b};e.prototype.reset=function(){return this.particles=[]};r=function(){function a(){}a.prototype.time=0;a.prototype.particle=null;a.prototype.particle2=null;return a}();e.prototype.edgeCollision=function(a,b){var d;d=a.cOR;a.x+a.radius>=this.width?b?(a.xVel*=-d,a.yVel*=d):a.x=this.width-a.radius:0>=a.x-a.radius&&(b?(a.xVel*=-d,a.yVel*=d):a.x=a.radius);if(a.y+a.radius>=this.height)return b?(a.xVel*=d,a.yVel*=-d):a.y=this.height-a.radius;
if(0>=a.y-a.radius)return b?(a.xVel*=d,a.yVel*=-d):a.y=a.radius};e.prototype.collide=function(a,b,d){var f,l,h;l=b.x-a.x;h=b.y-a.y;f=b.radius+a.radius;return l*l+h*h<f*f?(l=new m(a.x-b.x,a.y-b.y),b=new m(a.xVel-b.xVel,a.yVel-b.yVel),a=b.dotProduct(b),b=-2*b.dotProduct(l),f=l.dotProduct(l)-f*f,f=b*b-4*a*f,h=l=0,0<=f&&(l=(-b-Math.sqrt(f))/(2*a),h=(-b+Math.sqrt(f))/(2*a)),d.time=0<l&&1>=l?l:0<h&&1>=h?h:1,!0):!1};g=function(a,b){var d,f,l,h,g;g=new m(a.xVel,a.yVel);d=Math.PI/2;0!==a.xVel&&(d=Math.atan(a.yVel/
a.xVel));h=(a.xVel*Math.cos(-d)-a.yVel*Math.sin(-d))*a.cOR;f=a.x-b.x;l=a.y-b.y;f=0!==f?Math.atan(l/f):Math.atan(l/(f-1E-5));g.x=h*Math.cos(f-d);g.y=h*Math.sin(f-d);return g};e.prototype.handleCollision=function(a){var b,d,f,l,h,q,t,c,e;h=a.particle;q=a.particle2;e=g(h,q);t=g(q,h);f=(e.x*(h.mass-q.mass)+2*q.mass*t.x)/(h.mass+q.mass);l=(t.x*(q.mass-h.mass)+2*h.mass*e.x)/(h.mass+q.mass);b=Math.atan((h.y-q.y)/(h.x-q.x));d=Math.cos(b);c=Math.sin(b);b=f*d+e.y*c;e=f*c-e.y*d;f=l*d+t.y*c;d=l*c-t.y*d;this.seperateObjects(a,
h,q);h.xVel=b;h.yVel=e;q.xVel=f;return q.yVel=d};e.prototype.seperateObjects=function(a,b,d){var f,l;a=a.time+0.001*a.time;if(1>a)return b.x-=b.xVel*this.settings.global.speedConst*a,b.y-=b.yVel*this.settings.global.speedConst*a,d.x-=d.xVel*this.settings.global.speedConst*a,d.y-=d.yVel*this.settings.global.speedConst*a;a=d.x-b.x;f=d.y-b.y;a=d.radius-Math.abs(Math.sqrt(a*a+f*f)-b.radius)+0.1;f=(new m(b.xVel,b.yVel)).getMagnitudeNS()+1E-4;l=(new m(d.xVel,d.yVel)).getMagnitudeNS()+1E-4;l=f/(f+l);f=Math.atan2(b.y-
d.y,b.x-d.x);b.x+=a*Math.cos(f)*l;b.y+=a*Math.sin(f)*l;l=1-l;d.x-=a*Math.cos(f)*l;return d.y-=a*Math.sin(f)*l};e.prototype.update=function(){var a,b,d,f,l,h,g,c,e;d=this.particles;a=0;for(b=d.length;a<b;a++)h=d[a],this.edgeCollision(h,!0),h.update();a=[];c=this.particles;b=d=0;for(l=c.length;d<l;b=++d)for(h=c[b],b=f=b+1,e=this.particles.length-1;f<=e;b=f+=1)g=this.particles[b],b=new r,this.collide(h,g,b)&&(b.particle=h,b.particle2=g,a.push(b));a.sort(function(a,b){return a.time<b.time});d=0;for(h=
a.length;d<h;d++)b=a[d],this.handleCollision(b);d=this.particles;b=0;for(a=d.length;b<a;b++)h=d[b],this.edgeCollision(h,!1);return this.fire("update")};return e}()}).call(this)},{"../events/event-manager":3,"../math/pvector":5,"../objects/particle":6}],3:[function(e,k,p){(function(){k.exports=function(){function c(){}var e,k;e=function(){function c(g,a){this.name=g;this.data=a;this.removed=this.cancelled=!1}c.prototype.cancel=function(){return this.cancelled=!0};c.prototype.remove=function(){return this.removed=
!0};return c}();k=[];c.prototype.addListener=function(c,g){(k[c]=k[c]||[]).push(g);return this};c.prototype.removeListener=function(c,g){var a,b,d,f,l,h;if(1===arguments.length)k[c]=[];else if("function"===typeof g&&(h=k[c],void 0!==h)){a=-1;b=d=0;for(f=h.length;d<f;b=++d)if(l=h[b],l===g){a=b;break}0<=a&&h.splice(a,1)}return this};c.prototype.fire=function(c,g){var a,b,d,f,l,h,q;q=k[c];g=g||[];if(void 0!==q)for(a={},d=f=0,l=q.length;f<l&&(h=q[d],b=new e(c,a),h.apply(window,g.concat(b)),a=b.data,b.removed&&
q.splice(d,1),!b.cancelled);d=++f);return this};c.prototype.hasListeners=function(c){var g;return 0<(null!=(g=void 0===k[c])?g:{0:k[c].length})};c.eventify=function(e,g){var a,b,d,f,l,h;l=["addListener","removeListener","fire"];g=g||new c;a=function(a){return e[a]=function(){return g[a].apply(g,arguments)}};h=[];b=0;for(d=l.length;b<d;b++)f=l[b],h.push(a(f));return h};return c}()}).call(this)},{}],4:[function(e,k,p){(function(){k.exports=function(){return function(c,e){this.x=c;this.y=e}}()}).call(this)},
{}],5:[function(e,k,p){(function(){k.exports=function(){function c(c,e){this.x=c;this.y=e}c.prototype.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};c.prototype.getMagnitudeNS=function(){return this.x*this.x+this.y*this.y};c.prototype.dotProduct=function(c){return this.x*c.x+this.y*c.y};c.prototype.getNormal=function(){return new c(-this.y,this.x)};c.prototype.rotate=function(c){var e,k;e=this.x;k=this.y;this.x=e*Math.cos(c)-k*Math.sin(c);return this.y=e*Math.sin(c)+k*Math.cos(c)};
return c}()}).call(this)},{}],6:[function(e,k,p){(function(){var c,m=function(c,g){function a(){this.constructor=c}for(var b in g)s.call(g,b)&&(c[b]=g[b]);a.prototype=g.prototype;c.prototype=new a;c.__super__=g.prototype;return c},s={}.hasOwnProperty;c=e("./physics-object");e("../math/point-2d");k.exports=function(c){function g(a,b,d,f,c){this.radius=d;this.style=f;this.settings=c;g.__super__.constructor.call(this,a,b,0)}m(g,c);g.prototype.selected=!1;g.prototype.cOR=1;g.prototype.pastPositions=[];
g.prototype.curPos=0;g.prototype.update=function(){this.x+=this.xVel*this.settings.global.speedConst;return this.y+=this.yVel*this.settings.global.speedConst};g.prototype.copy=function(){var a;a=new g(this.x,this.y,this.radius,this.style,this.settings);a.index=this.index;a.cOR=this.cOR;a.mass=this.mass;a.xVel=this.xVel;a.yVel=this.yVel;return a};return g}(c)}).call(this)},{"../math/point-2d":4,"./physics-object":7}],7:[function(e,k,p){(function(){var c;c=e("../events/event-manager");k.exports=function(){function e(k,
m,g){this.x=k;this.y=m;this.mass=g;this.lastX=this.x;this.lastY=this.y;c.eventify(this)}e.prototype.xVel=0;e.prototype.yVel=0;e.prototype.capture=function(){this.lastX=this.x;return this.lastY=this.y};e.prototype.update=function(){this.x+=this.xVel;return this.y+=this.yVel};e.prototype.getEnergy=function(){return 0.5*this.mass*(this.xVel*this.xVel+this.yVel*this.yVel)};return e}()}).call(this)},{"../events/event-manager":3}],8:[function(e,k,p){(function(){k.exports=function(){function c(){}c.prototype.global=
{refreshRate:60,updateRate:60,showVelocities:!1,enableInterpolation:!0,maxTraceLength:30,speedConst:1,maxParticles:1E4,minRadius:5,maxRadius:30,errorTime:5E3};c.prototype.simulation={simulationWidth:1E3,simulationHeight:1E3,simulationCanvas:"simulation-canvas"};c.prototype.graph={graphCanvas:"graph-canvas",graphScaleX:0.02,graphScaleY:5,graphZoomFactor:1.25,graphMinZoomIndex:5,graphMaxZoomIndex:5};c.prototype.overlay={overlayCanvas:"overlay-canvas"};return c}()}).call(this)},{}],9:[function(e,k,p){k.exports.ECollision=
e("./ecollision");k.exports.ECollisionSettings=e("./settings");k.exports.SimulationEngine=e("./engine/simulation-engine");k.exports.SimulationRenderer=e("./ui/renderer/simulation-renderer");k.exports.EaselJSRenderer=e("./ui/renderer/easeljs/easeljs-renderer")},{"./ecollision":1,"./engine/simulation-engine":2,"./settings":8,"./ui/renderer/easeljs/easeljs-renderer":12,"./ui/renderer/simulation-renderer":15}],10:[function(e,k,p){(function(){var c,m,s=function(c,a){function b(){this.constructor=c}for(var d in a)r.call(a,
d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c},r={}.hasOwnProperty;m=e("./widget");e("../objects/particle");c=e("../math/point-2d");k.exports=function(e){function a(b,d,f,c,l){this.engine=d;this.scaleX=f;this.scaleY=c;this.settings=l;a.__super__.constructor.call(this,b)}var b,d,f,l,h,q,t,k,w,m,r;s(a,e);a.prototype.x=0;a.prototype.y=0;a.prototype.scaleX=0;a.prototype.scaleY=0;l=new createjs.Shape;m=t=q=0;f=[];k=0;h=150;w=!1;r=d=b=0;a.prototype.init=function(){var a,
b;a=new createjs.Shape;b=new createjs.Shape;a.graphics.beginStroke("red").moveTo(this.x,this.height).lineTo(this.width,this.height);b.graphics.beginStroke("red").moveTo(this.x,this.y).lineTo(this.x,this.height);this.stage.addChild(a);this.stage.addChild(b);this.stage.addChild(l);this.stage.update();return this.updateData()};a.prototype.draw=function(a){var c,e,h,g,r,s,n;if(null!==this.engine){a=l.graphics;a.clear();g=f.length-1;for(h=r=0;h<g-1;){if(w){w=!1;return}r+=f[h].y;c=(k+h)%g;e=(k+h+1)%g;s=
f[c].x*this.scaleX-q;s>this.width&&(q+=s-this.width);s=f[c].x*this.scaleX-q;n=f[c].y*this.scaleY+t+m;c=f[e].x*this.scaleX-q;e=f[e].y*this.scaleY+t+m;a.beginStroke("red").moveTo(this.x+s,this.y+this.height-n).lineTo(this.x+c,this.y+this.height-e);h++}this.paused||(b+=1E3/this.settings.global.updateRate,d=this.getEnergy(),this.addData(b,d));a=r/f.length;h=this.height/2;t=h-a*this.scaleY;return this.stage.update()}};a.prototype.restart=function(){f=[];q=t=b=d=k=0;return w=!0};a.prototype.calibrate=function(){return m=
0};a.prototype.zoomIn=function(){if(r<this.settings.graph.graphMaxZoomIndex)return this.scaleX*=this.settings.graph.graphZoomFactor,this.scaleY*=this.settings.graph.graphZoomFactor,q*=this.scaleX,t*=this.scaleY,this.updateData(),r++;throw"ERROR: Maximum zoom reached";};a.prototype.zoomOut=function(){if(r>-this.settings.graph.graphMinZoomIndex)return this.scaleX/=this.settings.graph.graphZoomFactor,this.scaleY/=this.settings.graph.graphZoomFactor,q*=this.scaleX,t*=this.scaleY,this.updateData(),r--;
throw"ERROR: Minimum zoom reached";};a.prototype.moveUp=function(){return m-=5};a.prototype.moveDown=function(){return m+=5};a.prototype.getZoomIndex=function(){return r};a.prototype.addData=function(a,b){var d;return f.length>h?(d=k,k=(k+1)%h,f[d]=new c(a,b)):f.push(new c(a,b))};a.prototype.updateData=function(){var a,b,d,c,l;b=[];h=Math.round(this.width/(1E3/this.settings.global.updateRate*this.scaleX))+5;a=f.length-1;d=0;a>h&&(d=a-h);c=d;for(l=a-1;d<=l;c=d+=1)c=(k+c)%a,b.push(f[c]);w=!0;k=0;return f=
b};a.prototype.getEnergy=function(){var a,b,d,c,f;a=0;f=this.engine.particles;b=0;for(d=f.length;b<d;b++)c=f[b],a+=c.getEnergy();return Math.round(a/1E3)};return a}(m)}).call(this)},{"../math/point-2d":4,"../objects/particle":6,"./widget":17}],11:[function(e,k,p){(function(){var c,m,s=function(a,b){return function(){return a.apply(b,arguments)}},r=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);d.prototype=b.prototype;a.prototype=new d;a.__super__=b.prototype;
return a},g={}.hasOwnProperty;m=e("./widget");c=e("../objects/particle");k.exports=function(a){function b(a,c,e){this.simulation=c;this.settings=e;this.handleClick=s(this.handleClick,this);this.handleMouseMove=s(this.handleMouseMove,this);this.handleMouseWheel=s(this.handleMouseWheel,this);b.__super__.constructor.call(this,a);x=f=this.width/2;y=l=this.height/2;B.x=this.width/2-40;z=k(this.width,this.height);this.hide();$(document).keydown(function(a){g=a.ctrlKey;return d=a.shiftKey});$(document).keyup(function(a){return d=
g=!1});this.canvas.bind("contextmenu",function(a){return!1});x=f=this.width/2;y=l=this.height/2;this.stage.addEventListener("stagemousemove",this.handleMouseMove);this.canvas.mousedown(this.handleClick);this.canvas.mousewheel(this.handleMouseWheel)}var d,f,l,h,e,g,k,m,p,z,u,E,A,B,x,y,F,n,v;r(b,a);m=0;A=-1;y=l=x=f=0;v=new createjs.Shape;p=new createjs.Text("","bold 15px Arial");h=new createjs.Text("","bold 15px Arial","red");e=0;F=!1;B=new createjs.Text("","bold 15px Arial");B.x=0;B.y=10;d=g=!1;E=
u=0;n=null;z=0;k=function(a,b){return b?k(b,a%b):a};b.prototype.resize=function(a,b){return z=k(this.width,this.height)};b.prototype.init=function(){this.stage.removeAllChildren();x=f=this.width/2;y=l=this.height/2;return this.stage.addChild(B)};b.prototype.handleMouseWheel=function(a){if(0>a.deltaY){if(n.radius>this.settings.global.minRadius)return n.radius-=1}else if(n.radius<this.settings.global.maxRadius)return n.radius+=1};b.prototype.handleMouseMove=function(a){var b,d,c,e,h;x=f=a.stageX;y=
l=a.stageY;g||(a=Math.round(x/z),b=Math.round(y/z),f=a*z,l=b*z);switch(m){case 0:v.x=f;v.y=l;null!==n&&(n.x=f,n.y=l);p.x=f;p.y=l;break;case 1:d=v.graphics;a=f-v.x;b=l-v.y;p.x=v.x+a/2;p.y=v.y+b/2;p.text=Math.round(Math.sqrt(a*a+b*b))+" px/s";n.xVel=a/this.settings.global.updateRate;n.yVel=b/this.settings.global.updateRate;d.clear().beginStroke("red").setStrokeStyle(3).moveTo(0,0).lineTo(a,b);break;case 2:for(h=this.simulation.engine.particles,d=0,c=h.length;d<c;d++)e=h[d],a=e.x-x,b=e.y-y,a*a+b*b<=
e.radius*e.radius?(e.select(),n=e):e.deselect()}};b.prototype.handleClick=function(a){var b;if(2===a.button&&2!==m){switch(m){case 0:this.end()}this.reset()}else switch(m){case 0:v.graphics.clear();this.stage.addChild(v);this.stage.addChild(p);m=1;break;case 1:b=this.simulation.addParticle(n.x,n.y,n.mass,n.radius,n.style);b.xVel=n.xVel;b.yVel=n.yVel;b.cOR=n.cOR;this.stage.removeChild(v);this.stage.removeChild(p);n.xVel=n.yVel=0;1!==A||d?m=0:(m=2,this.stage.removeChild(n.displayObj));break;case 2:n.displayObj.dispatchEvent("click"),
2===a.button?this.simulation.removeSelected():(b=n,n=b.copy(),u=b.x,E=b.y,this.stage.addChild(n.displayObj),d||this.simulation.removeSelected(),m=0)}return a.stopPropagation()};b.prototype.draw=function(a){if(!this.hidden)return null!==n&&n.draw(n.x,n.y),F&&(e-=1E3/this.settings.global.updateRate,0>=e&&(F=!1,this.stage.removeChild(h))),this.stage.update()};b.prototype.reset=function(){var a;if(1===A)return a=simulation.addParticle(u,E,n.mass,n.radius,n.style),a.xVel=n.xVel,a.yVel=n.yVel,this.removeChild(n.displayObj),
n=null,m=2;this.stage.removeChild(v);this.stage.removeChild(p);return m=0};b.prototype.beginAdd=function(a,b,d){this.show();this.init();n=new c(f,l,25,d,this.settings);n.mass=a;n.cOR=b;p.x=x;p.y=y;this.stage.addChild(n.displayObj);B.text="Mode: Add";return A=m=0};b.prototype.beginEdit=function(){this.show();this.init();B.text="Mode: Edit";m=2;return A=1};b.prototype.end=function(){this.hide();this.stage.removeAllChildren();null!==n&&(n=null);A=-1;return d=g=!1};b.prototype.getCurrentParticle=function(){return n};
b.prototype.getMode=function(){return A};return b}(m)}).call(this)},{"../objects/particle":6,"./widget":17}],12:[function(e,k,p){(function(){var c,m,p=function(c,a){function b(){this.constructor=c}for(var d in a)r.call(a,d)&&(c[d]=a[d]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c},r={}.hasOwnProperty;c=e("./particle-renderer");m=e("../simulation-renderer");k.exports=function(e){function a(d,c){this.canvasName=d;this.engine=c;a.__super__.constructor.call(this,this.canvasName,
this.engine);this.stage=new createjs.Stage(this.canvasName);this.engine.addListener("update",function(){var a,d,c,f;f=[];a=0;for(d=b.length;a<d;a++)c=b[a],f.push(c.capture());return f})}var b;p(a,e);b=[];a.prototype.addParticle=function(a){a=new c(a);this.stage.addChild(a.displayObj);b.push(a);return console.log(b.length)};a.prototype.removeParticle=function(a){};a.prototype.draw=function(a){var c,e,h;c=0;for(e=b.length;c<e;c++)h=b[c],h.draw(a);return this.stage.update()};return a}(m)}).call(this)},
{"../simulation-renderer":15,"./particle-renderer":13}],13:[function(e,k,p){(function(){var c,m,p,r=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);d.prototype=b.prototype;a.prototype=new d;a.__super__=b.prototype;return a},g={}.hasOwnProperty;p=e("../renderer");m=e("../../../math/point-2d");c=e("../../../events/event-manager");k.exports=function(a){function b(a){this.particle=a;this.displayObj=new createjs.Shape;e=this.particle.x;l=this.particle.y;this.displayObj.x=
this.particle.x;this.displayObj.y=this.particle.y;this.displayObj.addEventListener("click",function(a){return function(b){a.selected?a.fire("deselect",[b,a]):a.fire("select",[b,a]);return a.selected=!a.selected}}(this));this.particle.addListener("update",function(a){return function(b){a.capture();b=h.length;if(a.selected)return d++,d%=20,20>b?h.push(new m(a.x,a.y)):h[d]=new m(a.x,a.y)}}(this));this.selected=!1;c.eventify(this)}var d,e,l,h;r(b,a);h=[];l=e=d=0;b.prototype.capture=function(){e=this.particle.x;
return l=this.particle.y};b.prototype.select=function(){return this.selected=!0};b.prototype.deselect=function(){this.selected=!1;return this.particle.pastPositions=[]};b.prototype.draw=function(a){var b,d,c,g,k,m;d=this.particle.x;c=this.particle.y;d=e+a*(d-e);c=l+a*(c-l);this.displayObj.x=d;this.displayObj.y=c;a=this.displayObj.graphics;a.clear();if(this.selected){c=h.length;b=d=0;for(m=c-1;d<=m;b=d+=1)g=h[(b+this.particle.curPos)%c],k=g.x-this.particle.x,g=g.y-this.particle.y,b/=c,b="rgba(100, 100, 100, "+
b+")",a.beginStroke(b).drawCircle(k,g,this.particle.radius).endStroke();a.beginStroke("blue").setStrokeStyle(3).drawCircle(0,0,this.particle.radius).endStroke()}return a.beginFill(this.particle.style).drawCircle(0,0,this.particle.radius).endFill()};return b}(p)}).call(this)},{"../../../events/event-manager":3,"../../../math/point-2d":4,"../renderer":14}],14:[function(e,k,p){(function(){k.exports=function(){function c(){}c.prototype.draw=function(c){};return c}()}).call(this)},{}],15:[function(e,k,
p){(function(){var c,m=function(c,e){function a(){this.constructor=c}for(var b in e)p.call(e,b)&&(c[b]=e[b]);a.prototype=e.prototype;c.prototype=new a;c.__super__=e.prototype;return c},p={}.hasOwnProperty;c=e("./renderer");k.exports=function(c){function e(a,b){this.canvas=a;this.engine=b}m(e,c);e.prototype.addParticle=function(a){};e.prototype.removeParticle=function(a){};return e}(c)}).call(this)},{"./renderer":14}],16:[function(e,k,p){(function(){var c,m,p,r,g=function(b,d){function c(){this.constructor=
b}for(var e in d)a.call(d,e)&&(b[e]=d[e]);c.prototype=d.prototype;b.prototype=new c;b.__super__=d.prototype;return b},a={}.hasOwnProperty;r=e("./widget");p=e("../objects/particle");m=e("../events/event-manager");c=e("./renderer/easeljs/easeljs-renderer");k.exports=function(a){function d(a,b,e){this.engine=b;this.settings=e;d.__super__.constructor.call(this,a);this.engine.width=this.width;this.engine.height=this.height;this.renderer=new c(this.canvasName,this.engine);m.eventify(this)}var e;g(d,a);
e=null;d.prototype.resize=function(a,b){return this.engine.setBounds(a,b)};d.prototype.addParticle=function(a,b,c,d,e){a=new p(a,b,d,e,this.settings);a.mass=c;this.renderer.addParticle(a);a.addListener("select",function(a){return function(b,c){return a.selected=c}}(this)).addListener("deselect",function(a){return function(b,c){return a.selected=null}}(this));this.engine.particles.push(a);return a};d.prototype.removeParticle=function(a){this.stage.removeChild(this.engine.particles[a].displayObj);return this.engine.particles.splice(a,
1)};d.prototype.loadParticles=function(a){var b,c,d,e,f;this.restart();f=[];b=0;for(c=a.length;b<c;b++)d=a[b],e=this.addParticle(d.x,d.y,d.mass,d.radius,d.style),e.xVel=d.xVel,e.yVel=d.yVel,f.push(e.cOR=d.cOR);return f};d.prototype.saveParticles=function(a){var b,d,c,e,f;e=this.engine.particles;f=[];b=0;for(d=e.length;b<d;b++)c=e[b],f.push(a.push(c.copy()));return f};d.prototype.removeSelected=function(){var a,b,d,c,g;if(null!==e){g=this.particles;a=b=0;for(d=g.length;b<d;a=++b)c=g[a],c===e&&this.removeParticle(a);
return e=null}};d.prototype.getSelected=function(){return e};d.prototype.restart=function(){this.stage.removeAllChildren();e=null;this.engine.reset();return this.fire("restart")};d.prototype.draw=function(a){this.renderer.draw(a);return this.fire("draw")};return d}(r)}).call(this)},{"../events/event-manager":3,"../objects/particle":6,"./renderer/easeljs/easeljs-renderer":12,"./widget":17}],17:[function(e,k,p){(function(){k.exports=function(){function c(c){this.canvasName=c;this.canvas=$("#"+this.canvasName);
this.width=this.canvas.width();this.height=this.canvas.height();this.hidden=!1;this.stage=new createjs.Stage(this.canvasName);this.canvas.attr("width",this.width);this.canvas.attr("height",this.height)}c.prototype.init=function(){};c.prototype.addEventListener=function(c,e){return this.stage.addEventListener(c,e)};c.prototype.draw=function(c){};c.prototype.restart=function(){};c.prototype.stop=function(){};c.prototype.resume=function(){return this.paused=!1};c.prototype.pause=function(){return this.paused=
!0};c.prototype.resize=function(c,e){this.width=c;return this.height=e};c.prototype.show=function(){this.hidden=!1;return this.canvas.fadeIn(200)};c.prototype.hide=function(){this.hidden=!0;return this.canvas.fadeOut(200)};return c}()}).call(this)},{}]},{},[9])(9)});
